/*
 * jQuery UI Menubar 1.9m6
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Menubar
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */
(function(a){a.widget("ui.menubar",{version:"1.9m6",options:{autoExpand:!1,buttons:!1,menuIcon:!1,position:{my:"left top",at:"left bottom"}},_create:function(){var b=this,c=this.items=this.element.children("li").addClass("ui-menubar-item").attr("role","presentation").children("button, a");c.slice(1).attr("tabIndex",-1),this.element.addClass("ui-menubar ui-widget-header ui-helper-clearfix").attr("role","menubar"),this._focusable(c),this._hoverable(c),c.next("ul").menu({position:{within:this.options.position.within},select:function(c,e){e.item.parents("ul.ui-menu:last").hide(),b._close(),a(c.target).prev().focus(),b._trigger("select",c,e)}}).hide().attr({"aria-hidden":"true","aria-expanded":"false"}).bind("keydown.menubar",function(c){if(!a(this).is(":hidden"))switch(c.keyCode){case a.ui.keyCode.LEFT:b._left(c),c.preventDefault();break;case a.ui.keyCode.RIGHT:b._right(c),c.preventDefault()}}),c.each(function(){var c=a(this),e=c.next("ul");c.bind("click.menubar focus.menubar mouseenter.menubar",function(a){if(a.type!="focus"||!!a.originalEvent){a.preventDefault();if(a.type=="click"&&e.is(":visible")&&b.active&&b.active[0]==e[0])b._close();else if(b.open&&a.type=="mouseenter"||a.type=="click"||b.options.autoExpand)b.options.autoExpand&&clearTimeout(b.timer),b._open(a,e)}}).bind("keydown",function(c){switch(c.keyCode){case a.ui.keyCode.SPACE:case a.ui.keyCode.UP:case a.ui.keyCode.DOWN:b._open(c,a(this).next()),c.preventDefault();break;case a.ui.keyCode.LEFT:b._prev(c,a(this)),c.preventDefault();break;case a.ui.keyCode.RIGHT:b._next(c,a(this)),c.preventDefault()}}).addClass("ui-button ui-widget ui-button-text-only ui-menubar-link").attr("role","menuitem").attr("aria-haspopup","true").wrapInner("<span class='ui-button-text'></span>"),b.options.autoExpand&&(c.bind("mouseleave.menubar",function(){b.timer=setTimeout(function(){b._close()},150)}),e.bind("mouseleave.menubar",function(){b.timer=setTimeout(function(){b._close()},150)}).bind("mouseenter.menubar",function(){clearTimeout(b.timer)})),b.options.menuIcon&&(c.addClass("ui-state-default").append("<span class='ui-button-icon-secondary ui-icon ui-icon-triangle-1-s'></span>"),c.removeClass("ui-button-text-only").addClass("ui-button-text-icon-secondary")),b.options.buttons||c.addClass("ui-menubar-link").removeClass("ui-state-default")}),b._bind({keydown:function(c){if(c.keyCode==a.ui.keyCode.ESCAPE&&b.active&&b.active.menu("collapse",c)!==!0){var e=b.active;b.active.blur(),b._close(c),e.prev().focus()}},focusin:function(){clearTimeout(b.closeTimer)},focusout:function(a){b.closeTimer=setTimeout(function(){b._close(a)},100)}})},_destroy:function(){var b=this.element.children("li").removeClass("ui-menubar-item").removeAttr("role").children("button, a");this.element.removeClass("ui-menubar ui-widget-header ui-helper-clearfix").removeAttr("role").unbind(".menubar"),b.unbind(".menubar").removeClass("ui-button ui-widget ui-button-text-only ui-menubar-link ui-state-default").removeAttr("role").removeAttr("aria-haspopup").children("span.ui-button-text").each(function(){var b=a(this);b.parent().html(b.html())}).end().children(".ui-icon").remove(),this.element.find(":ui-menu").menu("destroy").show().removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("tabindex").unbind(".menubar")},_close:function(){this.active&&this.active.length&&(this.active.menu("collapseAll").hide().attr({"aria-hidden":"true","aria-expanded":"false"}),this.active.prev().removeClass("ui-state-active").removeAttr("tabIndex"),this.active=null,this.open=!1)},_open:function(b,c){if(!this.active||this.active[0]!=c[0]){this.active&&(this.active.menu("collapseAll").hide().attr({"aria-hidden":"true","aria-expanded":"false"}),this.active.prev().removeClass("ui-state-active"));var e=c.prev().addClass("ui-state-active").attr("tabIndex",-1);this.active=c.show().position(a.extend({of:e},this.options.position)).removeAttr("aria-hidden").attr("aria-expanded","true").menu("focus",b,c.children("li").first()).focus().focusin(),this.open=!0}},_prev:function(a,b){b.attr("tabIndex",-1);var c=b.parent().prevAll("li").children(".ui-button").eq(0);c.length?c.removeAttr("tabIndex")[0].focus():this.element.children("li:last").children(".ui-button:last").removeAttr("tabIndex")[0].focus()},_next:function(a,b){b.attr("tabIndex",-1);var c=b.parent().nextAll("li").children(".ui-button").eq(0);c.length?c.removeAttr("tabIndex")[0].focus():this.element.children("li:first").children(".ui-button:first").removeAttr("tabIndex")[0].focus()},_left:function(a){var b=this.active.parent().prevAll("li:eq(0)").children(".ui-menu").eq(0);b.length||(b=this.element.children("li:last").children(".ui-menu:first")),this._open(a,b)},_right:function(a){var b=this.active.parent().nextAll("li:eq(0)").children(".ui-menu").eq(0);b.length||(b=this.element.children("li:first").children(".ui-menu:first")),this._open(a,b)}})})(jQuery)